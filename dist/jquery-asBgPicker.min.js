/**
* jQuery asBgPicker v0.1.4
* https://github.com/amazingSurge/jquery-asBgPicker
*
* Copyright (c) amazingSurge
* Released under the LGPL-3.0 license
*/
!function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("undefined"!=typeof exports)t(require("jquery"));else{var s={exports:{}};t(e.jQuery),e.jqueryAsBgPickerEs=s.exports}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(e){return e&&e.__esModule?e:{default:e}}(e),i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),a={namespace:"asBgPicker",skin:null,image:"images/defaults.png",lang:"en",repeat:{defaultValue:"repeat",values:["no-repeat","repeat","repeat-x","repeat-y"],tpl:function(){return'<div class="{{namespace}}-repeat"><span class="{{namespace}}-repeat-title">{{strings.bgRepeat}}</span><ul class="{{namespace}}-repeat-content"><li class="repeat_no-repeat"></li><li class="repeat_repeat"></li><li class="repeat_repeat-x"></li><li class="repeat_repeat-y"></li></ul></div>'}},position:{defaultValue:"top left",values:["top left","top center","top right","center left","center center","center right","bottom left","bottom center","bottom right"],tpl:function(){return'<div class="{{namespace}}-position"><span class="{{namespace}}-position-title">{{strings.bgPosition}}</span><ul class="{{namespace}}-position-content"><li class="postion_top-left"></li><li class="postion_top-center"></li><li class="postion_top-right"></li><li class="postion_center-left"></li><li class="postion_center-center"></li><li class="postion_center-right"></li><li class="postion_bottom-left"></li><li class="postion_bottom-center"></li><li class="postion_bottom-right"></li></ul></div>'}},size:{defaultValue:"auto",values:["auto","cover","contain","100% 100%"],tpl:function(){return'<div class="{{namespace}}-size"><span class="{{namespace}}-size-title">{{strings.bgSize}}</span><ul class="{{namespace}}-size-content"><li class="size_adapt-auto"></li><li class="size_adapt-width"></li><li class="size_adapt-height"></li><li class="size_adapt-all"></li></ul></div>'}},attachment:{namespace:"asDropdown",defaultValue:"scroll",values:["scroll","fixed","inherit"],tpl:function(){return'<div class="{{namespace}}-attachment"><span class="{{namespace}}-attachment-title">{{strings.bgAttach}}</span><div class="{{namespace}}-attachment-content"><div class="{{attachNamespace}} {{namespace}}-dropdown-trigger"><i class="asIcon-caret-down"></i></div><ul><li class="attachment_scroll">scroll</li><li class="attachment_fixed">fixed</li><li class="attachment_default">default</li></ul></div></div>'}},tpl:function(){return'<div class="{{namespace}}"><div class="{{namespace}}-initiate"><i></i>{{strings.placeholder}}</div><div class="{{namespace}}-info"><div class="{{namespace}}-info-image"><i></i><span class="{{namespace}}-info-image-name">{{strings.placeholder}}</span></div><div class="{{namespace}}-info-change">{{strings.change}}</div><a class="{{namespace}}-info-remove" href=""></a></div><div class="{{namespace}}-expand"><a class="{{namespace}}-expand-close" href="#"></a><div class="{{namespace}}-expand-image-wrap"><div class="{{namespace}}-expand-image"></div></div></div></div>'},process:function(e){return e&&void 0!==e.image&&""!==e.image?JSON.stringify(e):""},parse:function(e){return e?$.parseJSON(e):{}},getThumbnalil:function(e){var t=void 0,s=void 0,i=void 0,a=void 0;return t=e.match(/([\S]+[\/])([\S]+)(\.+\w+$)/i),a=t[1],i=t[2],s=t[3],0===i.search("thumbnail")?a+i+s:a+"thumbnail-"+i+s},select:function(){},onChange:function(){}},n={en:{placeholder:"Add Image",change:"change",bgRepeat:"Repeat",bgPosition:"Position",bgAttach:"Attach",bgSize:"Scalling"}},l=function(){function e(s){t(this,e),this.instance=s,this.values=s.options.repeat.values,this.defaultValue=s.options.repeat.defaultValue,this.init()}return i(e,[{key:"init",value:function(){var e=this,t=this.instance.options.repeat.tpl().replace(/\{\{namespace\}\}/g,this.instance.namespace).replace(/\{\{strings.bgRepeat\}\}/g,this.instance.strings.bgRepeat);this.$tplRepeat=$(t),this.instance.$imageWrap.after(this.$tplRepeat),this.$repeat=this.instance.$expand.find("."+this.instance.namespace+"-repeat"),this.$items=this.$repeat.find("li"),$.each(this.values,function(t,s){e.$items.eq(t).data("repeat",s)});var s=void 0!==this.instance.value.repeat?this.instance.value.repeat:this.defaultValue;this.set(s),this.bindEvent()}},{key:"set",value:function(e){var t=!1;this.$items.removeClass(this.instance.classes.active);for(var s=0;s<this.values.length;s++)e===this.values[s]&&(this.instance.value.repeat=e,this.$items.eq(s).addClass(this.instance.classes.active),this.instance.$image.css({"background-repeat":e}),t=!0);t||this.set(this.defaultValue)}},{key:"clear",value:function(){this.set(this.defaultValue)}},{key:"bindEvent",value:function(){var e=this;this.$repeat.on("click","li",function(){if(!e.instance.disabled){var t=$(this).data("repeat");return e.set(t),e.instance._update(),!1}})}}]),e}(),c=function(){function e(s){t(this,e),this.instance=s,this.values=s.options.size.values,this.defaultValue=s.options.size.defaultValue,this.init()}return i(e,[{key:"init",value:function(){var e=this,t=this.instance.options.size.tpl().replace(/\{\{namespace\}\}/g,this.instance.namespace).replace(/\{\{strings.bgSize\}\}/g,this.instance.strings.bgSize);this.$tplSize=$(t),this.instance.$imageWrap.after(this.$tplSize),this.$size=this.instance.$expand.find("."+this.instance.namespace+"-size"),this.$items=this.$size.find("li"),$.each(this.values,function(t,s){e.$items.eq(t).data("size",s)});var s=void 0!==this.instance.value.size?this.instance.value.size:this.defaultValue;this.set(s),this.bindEvent()}},{key:"set",value:function(e){var t=!1;this.$items.removeClass(this.instance.classes.active);for(var s=0;s<this.values.length;s++)e===this.values[s]&&(this.instance.value.size=e,this.$items.eq(s).addClass(this.instance.classes.active),this.instance.$image.css({"background-size":e}),t=!0);t||this.set(this.defaultValue)}},{key:"clear",value:function(){this.set(this.defaultValue)}},{key:"bindEvent",value:function(){var e=this;this.$size.on("click","li",function(){if(!e.instance.disabled){var t=$(this).data("size");return e.set(t),e.instance._update(),!1}})}}]),e}(),h=function(){function e(s){t(this,e),this.instance=s,this.values=s.options.position.values,this.defaultValue=s.options.position.defaultValue,this.init()}return i(e,[{key:"init",value:function(){var e=this,t=this.instance.options.position.tpl().replace(/\{\{namespace\}\}/g,this.instance.namespace).replace(/\{\{strings.bgPosition\}\}/g,this.instance.strings.bgPosition);this.$tplPosition=$(t),this.instance.$imageWrap.after(this.$tplPosition),this.$position=this.instance.$expand.find("."+this.instance.namespace+"-position"),this.$items=this.$position.find("li"),$.each(this.values,function(t,s){e.$items.eq(t).data("position",s)});var s=void 0!==this.instance.value.position?this.instance.value.position:this.defaultValue;this.set(s),this.bindEvent()}},{key:"set",value:function(e){var t=!1;this.$items.removeClass(this.instance.classes.active);for(var s=0;s<this.values.length;s++)e===this.values[s]&&(this.instance.value.position=e,this.$items.eq(s).addClass(this.instance.classes.active),this.instance.$image.css({"background-position":e}),t=!0);t||this.set(this.defaultValue)}},{key:"clear",value:function(){this.set(this.defaultValue)}},{key:"bindEvent",value:function(){var e=this;this.$position.on("click","li",function(){if(!e.instance.disabled){var t=$(this).data("position");return e.set(t),e.instance._update(),!1}})}}]),e}(),o=function(){function e(s){t(this,e),this.instance=s,this.values=s.options.attachment.values,this.defaultValue=s.options.attachment.defaultValue,this.init()}return i(e,[{key:"init",value:function(){var e=this,t=this.instance.options.attachment.tpl().replace(/\{\{attachNamespace\}\}/g,this.instance.options.attachment.namespace).replace(/\{\{namespace\}\}/g,this.instance.namespace).replace(/\{\{strings.bgAttach\}\}/g,this.instance.strings.bgAttach);this.$tplAttachment=$(t),this.instance.$imageWrap.after(this.$tplAttachment),this.$attachment=this.instance.$expand.find("."+this.instance.namespace+"-attachment"),this.$items=this.$attachment.find("li"),this.$dropdown=this.instance.$expand.find("."+this.instance.options.attachment.namespace),this.values=this.instance.options.attachment.values,$.each(this.values,function(t,s){e.$items.eq(t).data("attachment",s)});var s=this;this.$dropdown.asDropdown({namespace:this.instance.options.attachment.namespace,imitateSelect:!0,data:"attachment",onChange:function(e){s.instance.disabled||(s.instance.value.attachment=e,s.instance._update(),s.instance.$image.css({"background-attachment":s.instance.value.attachment}))}});var i=void 0!==this.instance.value.attachment?this.instance.value.attachment:this.defaultValue;this.set(i)}},{key:"set",value:function(e){var t=!1;this.$items.removeClass(this.instance.classes.active);for(var s=0;s<this.values.length;s++)e===this.values[s]&&(this.$dropdown.data("asDropdown").set(e),t=!0);t||this.set(this.defaultValue)}},{key:"clear",value:function(){this.set(this.defaultValue)}}]),e}(),r=function(){function e(i,l){t(this,e),this.element=i,this.$element=(0,s.default)(i),this.options=s.default.extend(!0,{},a,l,this.$element.data()),void 0===n[this.options.lang]?this.lang="en":this.lang=this.options.lang,this.strings=n[this.lang],this.namespace=this.options.namespace,this.classes={skin:this.namespace+"_"+this.options.skin,disabled:this.namespace+"_disabled",active:this.namespace+"_active",hover:this.namespace+"_hover",empty:this.namespace+"_empty",exist:this.namespace+"_exist",expand:this.namespace+"_expand"},this.$element.addClass(this.namespace+"-input"),this.disabled=!1,this.initialed=!1,this._trigger("init"),this._init()}return i(e,[{key:"_init",value:function(){this._createHtml(),this.options.skin&&this.$wrap.addClass(this.classes.skin),this.value=this.options.parse(this.$element.val()),this.set(this.value,!1),this.options.disabled&&this.disable(),this.value.image||this.$wrap.addClass(this.classes.empty),this.size=new c(this),this.attachment=new o(this),this.position=new h(this),this.repeat=new l(this),this.$wrap.addClass(this.classes.exist),this._bindEvent(),this.initialed=!0,this._trigger("ready")}},{key:"_bindEvent",value:function(){var e=this;this.$initiate.on("click",function(){e.disabled||e.$wrap.addClass(e.classes.expand).removeClass(e.classes.exist)}),this.$info.on("mouseenter",function(){e.disabled||(0,s.default)(this).addClass(e.classes.hover)}).on("mouseleave",function(){e.disabled||(0,s.default)(this).removeClass(e.classes.hover)}),this.$change.on("click",function(){e.disabled||e.$wrap.addClass(e.classes.expand).removeClass(e.classes.exist)}),this.$remove.on("click",function(){if(!e.disabled)return e.clear(),!1}),this.$close.on("click",function(){if(!e.disabled)return e.$wrap.addClass(e.classes.exist).removeClass(e.classes.expand),!1}),this.$image.on("click",function(){e.disabled||e.options.select.call(e)})}},{key:"_createHtml",value:function(){this.$wrap=(0,s.default)(this.options.tpl().replace(/\{\{namespace\}\}/g,this.namespace).replace(/\{\{strings.placeholder\}\}/g,this.strings.placeholder).replace(/\{\{strings.change\}\}/g,this.strings.change)),this.$element.after(this.$wrap),this.$initiate=(0,s.default)("."+this.namespace+"-initiate",this.$wrap),this.$info=(0,s.default)("."+this.namespace+"-info",this.$wrap),this.$infoImageName=(0,s.default)("."+this.namespace+"-info-image-name",this.$info),this.$remove=(0,s.default)("."+this.namespace+"-info-remove",this.$info),this.$change=(0,s.default)("."+this.namespace+"-info-change",this.$info),this.$expand=(0,s.default)("."+this.namespace+"-expand",this.$wrap),this.$close=(0,s.default)("."+this.namespace+"-expand-close",this.$expand),this.$imageWrap=(0,s.default)("."+this.namespace+"-expand-image-wrap",this.$expand),this.$image=(0,s.default)("."+this.namespace+"-expand-image",this.$expand)}},{key:"_trigger",value:function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];var a=[this].concat(s);this.$element.trigger("asBgPicker::"+e,a);var n="on"+(e=e.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}));"function"==typeof this.options[n]&&this.options[n].apply(this,s)}},{key:"_setState",value:function(e){e&&e!==this.options.image?this.$wrap.removeClass(this.classes.empty):this.$wrap.addClass(this.classes.empty)}},{key:"_returnInfo",value:function(e){var t=void 0;e&&e!==this.options.image?(t=e.match(/([\S]+[\/])([\S]+\w+$)/i)[2],this.$infoImageName.text(t)):this.$infoImageName.text(this.strings.placeholder)}},{key:"_update",value:function(){null===this.value&&(this.value={}),this.$element.val(this.val()),this._trigger("change",this.options.parse(this.val()))}},{key:"val",value:function(e){if(void 0===e)return this.options.process(this.value);var t=this.options.parse(e);t?this.set(t):this.clear()}},{key:"set",value:function(e,t){this.value=e,this.setImage(e.image),!1!==t&&(void 0!==e.repeat?this.repeat.set(e.repeat):this.repeat.clear(),void 0!==e.size?this.size.set(e.size):this.size.clear(),void 0!==e.position?this.position.set(e.position):this.position.clear(),void 0!==e.attachment?this.attachment.set(e.attachment):this.attachment.clear(),this._update())}},{key:"clear",value:function(e){if(this.value={},!1!==e){this.setImage(""),this.repeat.clear(),this.size.clear(),this.position.clear(),this.attachment.clear(),this._update()}}},{key:"setImage",value:function(e){var t=void 0,s=this;if(this._setState(e),this._returnInfo(e),""===e||void 0===e)this.$image.css({"background-image":"none"});else if(e||e!==this.options.image){t=this.options.getThumbnalil(e);var i=new Image;i.onload=function(){s.value.image=t,s._returnInfo(s.value.image),s.$image.css({"background-image":"url('"+s.value.image+"')"})},i.onerror=function(){s.value.image=e,s._returnInfo(e),s._update(),s.$image.css({"background-image":"none"})},i.src=t}}},{key:"setRepeat",value:function(e){this.repeat.set(e),this._update()}},{key:"setSize",value:function(e){this.size.set(e),this._update()}},{key:"setPosition",value:function(e){this.position.set(e),this._update()}},{key:"setAttachment",value:function(e){this.attachment.set(e),this._update()}},{key:"get",value:function(){return this.value}},{key:"enable",value:function(){this.disabled=!1,this.$wrap.removeClass(this.classes.disabled)}},{key:"disable",value:function(){this.disabled=!0,this.$wrap.addClass(this.classes.disabled)}},{key:"destroy",value:function(){this.$element.data("asBgPicker",null),this.$wrap.remove(),this._trigger("destroy")}}],[{key:"localize",value:function(e,t){n[e]=t}},{key:"setDefaults",value:function(e){s.default.extend(!0,a,s.default.isPlainObject(e)&&e)}}]),e}(),u={version:"0.1.4"},p=s.default.fn.asBgPicker,d=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];if("string"==typeof e){var n=e;if(/^_/.test(n))return!1;if(!(/^(get)$/.test(n)||"val"===n&&0===i.length))return this.each(function(){var e=s.default.data(this,"asBgPicker");e&&"function"==typeof e[n]&&e[n].apply(e,i)});var l=this.first().data("asBgPicker");if(l&&"function"==typeof l[n])return l[n].apply(l,i)}return this.each(function(){(0,s.default)(this).data("asBgPicker")||(0,s.default)(this).data("asBgPicker",new r(this,e))})};s.default.fn.asBgPicker=d,s.default.asBgPicker=s.default.extend({setDefaults:r.setDefaults,localize:r.localize,noConflict:function(){return s.default.fn.asBgPicker=p,d}},u)});
//# sourceMappingURL=jquery-asBgPicker.min.js.map
